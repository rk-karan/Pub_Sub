version: "3.9"

services:
  pubsub:
    build:
      context: ./backend        # folder where Dockerfile lives
      dockerfile: Dockerfile
    container_name: pubsub-service
    working_dir: /app/src       # so uvicorn runs from the src directory
    command: >
      uvicorn main:app
      --host 0.0.0.0
      --port 8000
    ports:
      - "8000:8000"             # expose API
    restart: unless-stopped
    volumes:
      - ./backend/src:/app/src  # optional: hot reload for local dev
